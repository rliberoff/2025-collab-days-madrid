@{
    ViewData["Title"] = "SignUp";
    string tenantDomain = ViewData["TenantDomain"] as string;
}

<h2>Tenant Onboarding</h2>
<div class="panel panel-info">
    <div class="panel-heading"><h4>On-boarding instructions</h4></div>
    <div class="panel-body">
        <p>In this demo app, details of tenants that have on-boarded are saved to a database.</p>
        <p>
            This page provides a link to start the onboarding process. Once the tenant administrator signs-in and consents to the app's requested permissions, this application's service principle is provisioned into this new client's tenant.
            This sample uses the <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-admin-consent#request-the-permissions-from-a-directory-admin">admin consent endpoint</a> for this purpose.
            Once the tenant administrator has consented, other users can start querying that tenant.
        </p>
        <p>Click on the button below to initiate the admin consent process register your tenant. You must use an <a href="https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-assign-admin-roles">admin account</a> on this step.</p>

        <p>You are attempting to onboard <strong>@tenantDomain</strong></p>
        <p>If this is not the tenant you want to onboard, signout (even from other accounts) and try again</p>

        <p>Click in the onboard tenant. Once you've done that, log in with a user from that tenant to complete the registry'</p>
        <form asp-controller="Onboarding" asp-action="Onboard" asp-route-tenantDomain="@tenantDomain" method="post" class="form-horizontal" role="form">
            @Html.AntiForgeryToken()
            <div>
                <button type="submit" class="btn btn-info">On-board my tenant</button>
            </div>
        </form>
        
    </div>
</div>